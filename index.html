<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey about Atopic Dermatitis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .survey-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .survey-header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .survey-header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .survey-header p {
            opacity: 0.9;
            font-size: 16px;
        }
        
        .section-nav {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #e1e5e9;
        }
        
        .section-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
        }
        
        .section-tab {
            padding: 8px 16px;
            background: #e1e5e9;
            border-radius: 20px;
            font-size: 14px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .section-tab.active {
            background: #4CAF50;
            color: white;
        }
        
        .section-tab.completed {
            background: #2196F3;
            color: white;
        }

		.section-tab.disabled {
			background: #e1e5e9 !important;
			color: #bbb !important;
			pointer-events: none;
			cursor: not-allowed;
			opacity: 0.5;
		}
		
        .survey-form {
            padding: 40px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .question-group {
            margin-bottom: 32px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
            border: 0; /* Reset fieldset default border */
            padding: 0; /* Reset fieldset default padding */
        }
        
        .hidden {
            display: none;
        }
        
        .question-label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            line-height: 1.4;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fafbfc;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #4CAF50;
            background: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }
        
        .age-input-group, .slider-input-group {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        .age-slider, .slider-input {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: #e1e5e9;
            outline: none;
            -webkit-appearance: none;
        }
        
        .age-slider::-webkit-slider-thumb, .slider-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
        
        .age-number, .slider-number {
            width: 100px;
            text-align: center;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .radio-option:hover, .checkbox-option:hover {
            background: #e8f5e8;
            border-color: #4CAF50;
        }
        
        .radio-option.selected, .checkbox-option.selected {
            background: #e8f5e8;
            border-color: #4CAF50;
        }
        
        .radio-option input, .checkbox-option input {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .radio-option label, .checkbox-option label {
            flex: 1;
            cursor: pointer;
            font-size: 16px;
            color: #333;
        }

		.radio-option input[type="radio"],
		.checkbox-option input[type="checkbox"] {
			/* Hide the actual control */
			opacity: 0;
			width: 0;
			height: 0;
			margin: 0;
			position: absolute;
			left: -9999px;
			pointer-events: none;
		}

        .select-wrapper {
            position: relative;
        }
        
        .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            background: #fafbfc;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
        }
        
        .form-select:focus {
            outline: none;
            border-color: #4CAF50;
            background-color: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }
        
        .scale-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        
        .scale-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
            min-width: 35px;
            flex: 1;
        }
        
        .scale-option:hover {
            background: #e8f5e8;
        }
        
        .scale-option.selected {
            background: #4CAF50;
            color: white;
        }
        
        .scale-option input {
            margin-bottom: 4px;
        }
        
        .scale-option label {
            font-size: 12px;
            text-align: center;
            cursor: pointer;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 16px;
        }
        
        .nav-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .prev-btn {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e1e5e9;
        }
        
        .prev-btn:hover {
            background: #e9ecef;
        }
        
        .next-btn, .submit-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            flex: 1;
        }
        
        .next-btn:hover, .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }
        
        .next-btn:disabled, .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .error-message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .stop-message {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 24px;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background-color: white;
            margin: 50% auto;
            padding: 30px;
            border-radius: 16px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            position: relative;
            top: -25%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .modal h2 {
            color: #4CAF50;
            margin-bottom: 16px;
            font-size: 24px;
        }
        
        .time-display {
            font-size: 36px;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .modal-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 16px;
        }
        
        @media (max-width: 768px) {
            .survey-form {
                padding: 24px;
            }
            
            .survey-header {
                padding: 24px;
            }
            
            .section-nav {
                padding: 16px 24px;
            }
            
            .section-tabs {
                gap: 4px;
            }
            
            .section-tab {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .age-input-group, .slider-input-group {
                flex-direction: column;
                gap: 12px;
            }
            
            .age-number, .slider-number {
                width: 100%;
            }
            
            .scale-group {
                gap: 4px;
            }
            
            .scale-option {
                min-width: 30px;
                padding: 6px;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="survey-container">
        <div class="survey-header">
            <h1>Survey about Atopic Dermatitis</h1>
            <p>Please answer all questions honestly. Your answers are confidential.</p>
        </div>
        
        <div class="section-nav">
            <div class="section-tabs">
                <div class="section-tab active" data-section="background">Background</div>
                <div class="section-tab" data-section="employment">Employment</div>
                <div class="section-tab" data-section="treatment">Treatment</div>
                <div class="section-tab" data-section="comorbidities">Comorbidities</div>
                <div class="section-tab" data-section="disease-severity">Disease Severity</div>
                <div class="section-tab" data-section="dlqi">DLQI</div>
                <div class="section-tab" data-section="who5">WHO-5</div>
                <div class="section-tab" data-section="poem">POEM</div>
                <div class="section-tab" data-section="madrs">MADRS</div>
                <div class="section-tab" data-section="wpai" id="wpaiTab">WPAI</div>

            </div>
        </div>
        
        <form class="survey-form" id="surveyForm" novalidate>
            <!-- Background Section -->
            <div class="section active" id="background">
                <h2 class="section-title">Background Information</h2>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Have you ever been diagnosed with atopic dermatitis by a doctor? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="ad_diagnosis" value="yes" id="ad_yes" required>
                            <label for="ad_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="ad_diagnosis" value="no" id="ad_no" required>
                            <label for="ad_no">No</label>
                        </div>
                    </div>
                </fieldset>
                
                <fieldset class="question-group">
                    <legend class="question-label">
                        When did you first experience symptoms of atopic dermatitis? <span class="required">*</span>
                    </legend>
                    <div class="select-wrapper">
                        <select name="ad_onset" class="form-select" required>
                            <option value="">Select age group</option>
                            <option value="primary_school">Before or during primary school (≤12 years)</option>
                            <option value="lower_secondary">During middle school (13–15 years)</option>
                            <option value="upper_secondary">During high school (16–19 years)</option>
                            <option value="20_29">20–29 years</option>
                            <option value="30_39">30–39 years</option>
                            <option value="40_49">40–49 years</option>
                            <option value="50_59">50–59 years</option>
                            <option value="60_69">60–69 years</option>
                            <option value="70_79">70–79 years</option>
                            <option value="80_85">80–85 years</option>
                            <option value="over_85">>85 years</option>
                        </select>
                    </div>
                </fieldset>
                
                <fieldset class="question-group">
                    <legend class="question-label">
                        Age (How old are you now?) <span class="required">*</span>
                    </legend>
                    <div class="age-input-group">
                        <input type="range" name="age_slider" class="age-slider" min="18" max="120" value="30" id="ageSlider">
                        <input type="number" name="age" class="form-input age-number" min="18" max="120" value="30" id="ageNumber" required aria-describedby="ageError">
                    </div>
                    <div id="ageError" class="error-message hidden">
                        Participation is for adults under 120 years (18-119 years).
                    </div>
                </fieldset>
                
                <fieldset class="question-group">
                    <legend class="question-label">
                        Gender <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="gender" value="male" id="gender_male" required>
                            <label for="gender_male">Male</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="gender" value="female" id="gender_female" required>
                            <label for="gender_female">Female</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group hidden" id="pregnancyQuestion">
                    <legend class="question-label">
                        Are you currently pregnant or breastfeeding? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="pregnant_lactating" value="yes" id="preg_yes">
                            <label for="preg_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="pregnant_lactating" value="no" id="preg_no">
                            <label for="preg_no">No</label>
                        </div>
                    </div>
                </fieldset>

                <div id="pregnancyStop" class="stop-message hidden">
                    <h3>Thank you for your interest</h3>
                    <p>This survey does not include pregnant or breastfeeding women. Thank you for your time.</p>
                </div>
                
                <fieldset class="question-group">
                    <legend class="question-label">
                        Do you smoke? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="smoking" value="yes" id="smoke_yes" required>
                            <label for="smoke_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="smoking" value="no" id="smoke_no" required>
                            <label for="smoke_no">No</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Weight in kg (drag the green button or enter a number in the field)<span class="required">*</span>
                    </legend>
                    <div class="slider-input-group">
                        <input type="range" name="weight_slider" class="slider-input" min="30" max="200" value="70" id="weightSlider">
                        <input type="number" name="weight" class="form-input slider-number" min="30" max="200" step="0.1" value="70" id="weightNumber" required>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Height in cm (drag the green button or enter a number in the field) <span class="required">*</span>
                    </legend>
                    <div class="slider-input-group">
                        <input type="range" name="height_slider" class="slider-input" min="100" max="220" value="170" id="heightSlider">
                        <input type="number" name="height" class="form-input slider-number" min="100" max="220" step="0.1" value="170" id="heightNumber" required>
                    </div>
                </fieldset>
            </div>
            
            <!-- Employment Section -->
            <div class="section" id="employment">
                <h2 class="section-title">Employment Information</h2>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Which of the following best describes your current employment situation? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="full_time" id="work_full" required>
                            <label for="work_full">Working full-time (100%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="part_time" id="work_part" required>
                            <label for="work_part">Working part-time (<100%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="full_disability" id="work_disability_full" required>
                            <label for="work_disability_full">Full disability benefits (100%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="partial_disability" id="work_disability_partial" required>
                            <label for="work_disability_partial">Partial disability benefits (50–95%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="work_situation" value="not_working" id="work_not" required>
                            <label for="work_not">Not working – other reason</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group hidden" id="partTimeQuestion">
                    <legend class="question-label">
                        If you work part-time, what percentage of a full-time position do you usually work? <span class="required">*</span>
                    </legend>
                    <div class="slider-input-group">
                        <input type="range" name="part_time_slider" class="slider-input" min="1" max="99" value="50" id="partTimeSlider">
                        <input type="number" name="part_time_percentage" class="form-input slider-number" min="1" max="99" value="50" id="partTimeNumber">
                    </div>
                </fieldset>

				<fieldset class="question-group hidden" id="disabilityPercentageQuestion">
					<legend class="question-label">
						If you receive partial disability benefits, what percentage has been granted? <span class="required">*</span>
					</legend>
					<div class="slider-input-group">
						<input type="range" name="disability_percentage_slider" class="slider-input" min="50" max="99" value="50" id="disabilityPercentageSlider" required>
						<input type="number" name="disability_percentage" class="form-input slider-number" min="50" max="99" value="50" id="disabilityPercentageNumber" required aria-describedby="disabilityPercentageError">
					</div>
					<div id="disabilityPercentageError" class="error-message hidden">
						Disability percentage must be between 50 and 99%.
					</div>
				</fieldset>


                <fieldset class="question-group hidden" id="disabilityReasonQuestion">
                    <legend class="question-label">
                        If you receive disability benefits (full or partial), what is the main reason? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="disability_reason" value="atopic_dermatitis" id="disability_ad">
                            <label for="disability_ad">Atopic dermatitis</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="disability_reason" value="other" id="disability_other">
                            <label for="disability_other">Other reason</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group hidden" id="notWorkingReasonQuestion">
                    <legend class="question-label">
                        If you are not working for another reason, please indicate what best applies: <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="pensioner" id="not_work_pensioner">
                            <label for="not_work_pensioner">Retired</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="student" id="not_work_student">
                            <label for="not_work_student">Student / pupil</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="military" id="not_work_military">
                            <label for="not_work_military">Military service</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="assessment" id="not_work_assessment">
                            <label for="not_work_assessment">Work assessment allowance</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="job_seeker" id="not_work_seeker">
                            <label for="not_work_seeker">Job seeker</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="parental" id="not_work_parental">
                            <label for="not_work_parental">Parental leave</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="home_duties" id="not_work_home">
                            <label for="not_work_home">Homemaker</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="not_working_reason" value="other" id="not_work_other">
                            <label for="not_work_other">Other</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Household income <span class="required">*</span>
                    </legend>
                    <div class="select-wrapper">
                        <select name="household_income" class="form-select" required>
                            <option value="">Select income level</option>
                            <option value="under_400k">< 400 000 NOK</option>
                            <option value="400_599k">400 000 – 599 999 NOK</option>
                            <option value="600_799k">600 000 – 799 999 NOK</option>
							<option value="800_1099k">800 000 – 1 099 999 NOK</option>
                            <option value="1100_1499k">1 100 000 – 1 499 999 NOK</option>
                            <option value="1500k_plus">≥ 1 500 000 NOK</option>
                        </select>
                    </div>
                </fieldset>
            </div>
            
            <!-- Treatment Section -->
            <div class="section" id="treatment">
                <h2 class="section-title">Current Treatment Information</h2>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Have you seen or been referred to a dermatologist for your atopic dermatitis? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dermatologist" value="yes" id="derm_yes" required>
                            <label for="derm_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dermatologist" value="no" id="derm_no" required>
                            <label for="derm_no">No</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Have you ever received treatment for atopic eczema? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="ever_treated" value="yes" id="treated_yes" required>
                            <label for="treated_yes">Yes, from a dermatologist.</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="ever_treated" value="yes" id="treated_yes_other" required>
                            <label for="treated_yes_other">Yes, from another type of doctor (e.g., general practitioner).</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="ever_treated" value="no" id="treated_no" required>
                            <label for="treated_no">No, or self-treatment only.</label>
                        </div>
                    </div>
                </fieldset>
                
                <div id="treatmentQuestions" class="hidden">
                    <fieldset class="question-group">
                        <legend class="question-label">
                            When did you receive your first treatment for atopic eczema? <span class="required">*</span>
                        </legend>
                        <div class="select-wrapper">
                            <select name="first_treatment" class="form-select">
                                <option value="">Select age group (click here to select)</option>
                                <option value="primary_school">Before or during primary school (≤12 years)</option>
                                <option value="lower_secondary">During middle school (13–15 years)</option>
                                <option value="upper_secondary">During high school (16–19 years)</option>
                                <option value="20_29">20–29 years</option>
                                <option value="30_39">30–39 years</option>
                                <option value="40_49">40–49 years</option>
                                <option value="50_59">50–59 years</option>
                                <option value="60_69">60–69 years</option>
                                <option value="70_79">70–79 years</option>
                                <option value="80_85">80–85 years</option>
                                <option value="over_85">>85 years</option>
                            </select>
                        </div>
                    </fieldset>

                    <fieldset class="question-group">
                        <legend class="question-label">
                            Are you currently taking oral medication (tablets) for atopic eczema? <span class="required">*</span>
                        </legend>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_oral" value="yes" id="oral_current_yes">
                                <label for="oral_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_oral" value="no" id="oral_current_no">
                                <label for="oral_current_no">No</label>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="question-group hidden" id="currentOralMedsQuestion">
                        <legend class="question-label">
                            Which oral medication(s) are you currently taking? (Select all that apply)
                        </legend>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="methotrexate" id="oral_methotrexate">
                                <label for="oral_methotrexate">Methotrexate</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="cyclosporine" id="oral_cyclosporine">
                                <label for="oral_cyclosporine">Ciclosporin (Sandimmun)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="azathioprine" id="oral_azathioprine">
                                <label for="oral_azathioprine">Azathioprine (Imurel)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="baricitinib" id="oral_baricitinib">
                                <label for="oral_baricitinib">Baricitinib (Olumiant)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="abrocitinib" id="oral_abrocitinib">
                                <label for="oral_abrocitinib">Abrocitinib (Cibinqo)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="upadacitinib" id="oral_upadacitinib">
                                <label for="oral_upadacitinib">Upadacitinib (Rinvoq)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="prednisolone" id="oral_prednisolone">
                                <label for="oral_prednisolone">Prednisolone</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_oral_meds" value="other_oral" id="oral_other">
                                <label for="oral_other">Other oral medication (tablets), or don't remember</label>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="question-group">
                        <legend class="question-label">
                            Are you currently receiving injectable treatment for atopic eczema? <span class="required">*</span>
                        </legend>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_injectable" value="yes" id="injectable_current_yes">
                                <label for="injectable_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_injectable" value="no" id="injectable_current_no">
                                <label for="injectable_current_no">No</label>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="question-group hidden" id="currentInjectableMedsQuestion">
                        <legend class="question-label">
                            Which injectable treatment(s) are you currently receiving? (Select all that apply)
                        </legend>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_injectable_meds" value="methotrexate_injection" id="inject_methotrexate">
                                <label for="inject_methotrexate">Methotrexate injection (Metex / Methofill / Nordimet)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_injectable_meds" value="lebrikizumab" id="inject_lebrikizumab">
                                <label for="inject_lebrikizumab">Lebrikizumab (Ebglyss)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_injectable_meds" value="dupilumab" id="inject_dupilumab">
                                <label for="inject_dupilumab">Dupilumab (Dupixent)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_injectable_meds" value="other_injectable" id="inject_other">
                                <label for="inject_other">Other injectable treatment, or don't remember</label>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="question-group">
                        <legend class="question-label">
                            Are you currently using topical treatment (creams, ointments, lotions) for atopic eczema? <span class="required">*</span>
                        </legend>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_topical" value="yes" id="topical_current_yes">
                                <label for="topical_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_topical" value="no" id="topical_current_no">
                                <label for="topical_current_no">No</label>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="question-group hidden" id="currentTopicalMedsQuestion">
                        <legend class="question-label">
                            Which topical treatment are you currently using? (Select all that apply)
                        </legend>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_topical_meds" value="corticosteroid" id="topical_corticosteroid">
                                <label for="topical_corticosteroid">Prescription cream</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_topical_meds" value="generic_cream" id="generic_cream">
                                <label for="generic_cream">Non-prescription cream</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" name="current_topical_meds" value="other_topical" id="topical_other">
                                <label for="topical_other">Other topical treatment, or don't remember</label>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="question-group">
                        <legend class="question-label">
                            Are you currently receiving phototherapy (light treatment) for atopic eczema? <span class="required">*</span>
                        </legend>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_phototherapy" value="yes" id="photo_current_yes">
                                <label for="photo_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_phototherapy" value="no" id="photo_current_no">
                                <label for="photo_current_no">No</label>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="question-group">
                        <legend class="question-label">
                            Are you using any other form of treatment (e.g., supplementary treatment or alternative medicine)? <span class="required">*</span>
                        </legend>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_alternative" value="yes" id="alt_current_yes">
                                <label for="alt_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_alternative" value="no" id="alt_current_no">
                                <label for="alt_current_no">No</label>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="question-group" id="currentNoTreatmentAnyQuestionGroup">
                        <legend class="question-label">
                            Are you currently not receiving any treatment for atopic eczema? <span class="required">*</span>
                        </legend>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="current_no_treatment_any" value="yes" id="no_treatment_current_yes">
                                <label for="no_treatment_current_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="current_no_treatment_any" value="no" id="no_treatment_current_no">
                                <label for="no_treatment_current_no">No</label>
                            </div>
                        </div>
                    </fieldset>

					<fieldset class="question-group">
						<legend class="question-label">
							Are you satisfied with your current treatment? (0–10 scale, where 0 = not satisfied at all, 10 = completely satisfied) <span class="required">*</span>
						</legend>
						<div class="slider-input-group">
							<input type="range" name="satisfaction_slider" class="slider-input" min="0" max="10" value="0" id="satisfactionSlider" required>
							<input type="number" name="satisfaction" class="form-input slider-number" min="0" max="10" value="0" id="satisfactionNumber" required>
						</div>
						<div style="margin-top: 8px; color: #888; font-size:0.95em; text-align:center;">
							0: Not satisfied at all<br>
							10: Completely satisfied
						</div>
					</fieldset>

                </div>
            </div>
           
            <!-- Comorbidities Section -->
            <div class="section" id="comorbidities">
                <h2 class="section-title">Comorbidities</h2>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Are you receiving treatment for asthma, allergy and/or rhinosinusitis? (Select all that apply)
                    </legend>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="respiratory_comorbidities" value="asthma" id="comorbid_asthma">
                            <label for="comorbid_asthma">Asthma</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="respiratory_comorbidities" value="allergy" id="comorbid_allergy">
                            <label for="comorbid_allergy">Allergy</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="respiratory_comorbidities" value="rhinosinusitis" id="comorbid_rhinosinusitis">
                            <label for="comorbid_rhinosinusitis">Rhinosinusitis (sinus infection)</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Are you receiving treatment for diabetes, cardiovascular disease and/or osteoporosis? (Select all that apply)
                    </legend>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="metabolic_comorbidities" value="diabetes" id="comorbid_diabetes">
                            <label for="comorbid_diabetes">Diabetes</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="metabolic_comorbidities" value="cardiovascular" id="comorbid_cvd">
                            <label for="comorbid_cvd">Cardiovascular disease</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="metabolic_comorbidities" value="osteoporosis" id="comorbid_osteoporosis">
                            <label for="comorbid_osteoporosis">Osteoporosis</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Are you receiving treatment for depression, ADHD and/or anxiety? (Select all that apply)
                    </legend>
                    <div class="checkbox-group">
                        <div class="checkbox-option">
                            <input type="checkbox" name="mental_health_comorbidities" value="depression" id="comorbid_depression">
                            <label for="comorbid_depression">Depression</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="mental_health_comorbidities" value="adhd" id="comorbid_adhd">
                            <label for="comorbid_adhd">ADHD</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="mental_health_comorbidities" value="anxiety" id="comorbid_anxiety">
                            <label for="comorbid_anxiety">Anxiety</label>
                        </div>
                    </div>
                </fieldset>
            </div>
            
            <!-- Disease Severity Section -->
            <div class="section" id="disease-severity">
                <h2 class="section-title">Disease Severity</h2>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How much of your body is covered by atopic eczema? One palm represents 1% of body surface area. <span class="required">*</span>
                    </legend>
                    <div class="select-wrapper">
                        <select name="body_coverage" class="form-select" required>
                            <option value="">Select percentage</option>
                            <option value="0-10">0-10%</option>
                            <option value="11-20">11-20%</option>
                            <option value="21-30">21-30%</option>
                            <option value="31-40">31-40%</option>
                            <option value="41-50">41-50%</option>
                            <option value="51-60">51-60%</option>
                            <option value="61-70">61-70%</option>
                            <option value="71-80">71-80%</option>
                            <option value="81-90">81-90%</option>
                            <option value="91-100">91-100%</option>
                        </select>
                    </div>
                </fieldset>

				<fieldset class="question-group">
					<legend class="question-label">
						On a scale from 0 to 10, how would you rate your itch at its worst moment over the past 24 hours? <span class="required">*</span>
					</legend>
					<div class="slider-input-group">
						<input type="range" name="itch_scale_slider" class="slider-input" min="0" max="10" value="0" id="itchScaleSlider" required>
						<input type="number" name="itch_scale" class="form-input slider-number" min="0" max="10" value="0" id="itchScaleNumber" required>
					</div>
					<div style="margin-top: 8px; text-align:center; color:#888;">
						0 = no itch, 10 = worst possible itch
					</div>
				</fieldset>


				<fieldset class="question-group">
					<legend class="question-label">
						To what extent did itching disturb your sleep last night? <span class="required">*</span>
					</legend>
					<div class="slider-input-group">
						<input type="range" name="sleep_interference_slider" class="slider-input" min="0" max="4" value="0" id="sleepInterferenceSlider" required>
						<input type="number" name="sleep_interference" class="form-input slider-number" min="0" max="4" value="0" id="sleepInterferenceNumber" required>
					</div>
					<div style="margin-top: 8px; text-align:center; color:#888;">
						0 = Not at all, 1 = A little, 2 = Moderately, 3 = A lot, 4 = Extremely
					</div>
				</fieldset>


                <fieldset class="question-group">
                    <legend class="question-label">
                        Which body parts are affected by atopic eczema? (Select all that apply) <span class="required">*</span>
                    </legend>
                    <div class="checkbox-group" id="affectedBodyPartsGroup">
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="head_neck" id="body_head_neck">
                            <label for="body_head_neck">Head, face and neck</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="arms" id="body_arms">
                            <label for="body_arms">Arms</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="trunk" id="body_trunk">
                            <label for="body_trunk">Trunk</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="legs" id="body_legs">
                            <label for="body_legs">Legs/feet</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="genitals" id="body_genitals">
                            <label for="body_genitals">Genitals</label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" name="affected_body_parts" value="hands" id="body_hands">
                            <label for="body_hands">Hands</label>
                        </div>
                    </div>
                     <input type="text" id="affected_body_parts_validation" style="opacity:0; width:0; height:0; position:absolute; z-index:-1;" required>
                </fieldset>
            </div>
            
            <!-- DLQI Section -->
            <div class="section" id="dlqi">
                <h2 class="section-title">DLQI (Dermatology Life Quality Index)</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">Please answer the following questions about how your skin has affected your life over the past week.</p>
                
                <fieldset class="question-group">
                    <legend class="question-label">
                        How itchy, sore, painful or stinging has your skin been over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="3" id="dlqi1_3" required>
                            <label for="dlqi1_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="2" id="dlqi1_2" required>
                            <label for="dlqi1_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="1" id="dlqi1_1" required>
                            <label for="dlqi1_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_1" value="0" id="dlqi1_0" required>
                            <label for="dlqi1_0">Not at all</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How embarrassed or self-conscious have you been because of your skin over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="3" id="dlqi2_3" required>
                            <label for="dlqi2_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="2" id="dlqi2_2" required>
                            <label for="dlqi2_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="1" id="dlqi2_1" required>
                            <label for="dlqi2_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_2" value="0" id="dlqi2_0" required>
                            <label for="dlqi2_0">Not at all</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How much has your skin interfered with you going shopping or looking after your home or garden over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="3" id="dlqi3_3" required>
                            <label for="dlqi3_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="2" id="dlqi3_2" required>
                            <label for="dlqi3_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="1" id="dlqi3_1" required>
                            <label for="dlqi3_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="0" id="dlqi3_0" required>
                            <label for="dlqi3_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_3" value="na" id="dlqi3_na" required>
                            <label for="dlqi3_na">Not relevant</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How much has your skin influenced the clothes you wear over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="3" id="dlqi4_3" required>
                            <label for="dlqi4_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="2" id="dlqi4_2" required>
                            <label for="dlqi4_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="1" id="dlqi4_1" required>
                            <label for="dlqi4_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_4" value="0" id="dlqi4_0" required>
                            <label for="dlqi4_0">Not at all</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How much has your skin affected any social or leisure activities over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="3" id="dlqi5_3" required>
                            <label for="dlqi5_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="2" id="dlqi5_2" required>
                            <label for="dlqi5_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="1" id="dlqi5_1" required>
                            <label for="dlqi5_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="0" id="dlqi5_0" required>
                            <label for="dlqi5_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_5" value="na" id="dlqi5_na" required>
                            <label for="dlqi5_na">Not relevant</label>
                        </div>
                    </div>
                </fieldset>
                
                <fieldset class="question-group">
                    <legend class="question-label">
                        How much has your skin made it difficult for you to do any sport over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="3" id="dlqi6_3" required>
                            <label for="dlqi6_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="2" id="dlqi6_2" required>
                            <label for="dlqi6_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="1" id="dlqi6_1" required>
                            <label for="dlqi6_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="0" id="dlqi6_0" required>
                            <label for="dlqi6_0">Not at all</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_6" value="na" id="dlqi6_na" required>
                            <label for="dlqi6_na">Not relevant</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Has your skin prevented you from working or studying over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                           <input type="radio" name="dlqi_7" value="3" id="dlqi7_yes" required>
                            <label for="dlqi7_yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_7" value="0" id="dlqi7_no" required>
                            <label for="dlqi7_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_7" value="na" id="dlqi7_na" required>
                            <label for="dlqi7_na">Not relevant</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How much has your skin created problems with your partner or any of your close friends or relatives over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="3" id="dlqi8_3" required>
                            <label for="dlqi8_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="2" id="dlqi8_2" required>
                            <label for="dlqi8_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="1" id="dlqi8_1" required>
                            <label for="dlqi8_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_8" value="0" id="dlqi8_0" required>
                            <label for="dlqi8_0">Not at all</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How much has your skin caused any sexual difficulties over the past week? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="3" id="dlqi9_3" required>
                            <label for="dlqi9_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="2" id="dlqi9_2" required>
                            <label for="dlqi9_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="1" id="dlqi9_1" required>
                            <label for="dlqi9_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_9" value="0" id="dlqi9_0" required>
                            <label for="dlqi9_0">Not at all</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How much of a problem has the treatment for your skin been over the past week, for example by making your home messy, or by taking up time? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="3" id="dlqi10_3" required>
                            <label for="dlqi10_3">Very much</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="2" id="dlqi10_2" required>
                            <label for="dlqi10_2">A lot</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="1" id="dlqi10_1" required>
                            <label for="dlqi10_1">A little</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="dlqi_10" value="0" id="dlqi10_0" required>
                            <label for="dlqi10_0">Not at all</label>
                        </div>
                    </div>
                </fieldset>
            </div>
            
			<!-- WHO-5 Section -->
			<div class="section" id="who5">
				<h2 class="section-title">WHO-5 Well-Being Index</h2>
				<p style="margin-bottom: 30px; text-align: center; color: #666;">Please indicate for each of the five statements which is closest to how you have been feeling <b>over the last two weeks.</b></p>
				
				<fieldset class="question-group">
					<legend class="question-label">
						I have felt cheerful and in good spirits <span class="required">*</span>
					</legend>
					<div class="radio-group">
						<div class="radio-option">
							<input type="radio" name="who5_1" value="5" id="who1_5" required>
							<label for="who1_5">All of the time <span style="font-weight:normal"></span></label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_1" value="4" id="who1_4" required>
							<label for="who1_4">Most of the time <span style="font-weight:normal"></span></label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_1" value="3" id="who1_3" required>
							<label for="who1_3">More than half of the time<span style="font-weight:normal"></span></label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_1" value="2" id="who1_2" required>
							<label for="who1_2">Less than half of the time<span style="font-weight:normal"></span></label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_1" value="1" id="who1_1" required>
							<label for="who1_1">Some of the time<span style="font-weight:normal"></span></label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_1" value="0" id="who1_0" required>
							<label for="who1_0">At no time<span style="font-weight:normal"></span></label>
						</div>
					</div>
				</fieldset>
				<fieldset class="question-group">
					<legend class="question-label">
						I have felt calm and relaxed <span class="required">*</span>
					</legend>
					<div class="radio-group">
						<div class="radio-option">
							<input type="radio" name="who5_2" value="5" id="who2_5" required>
							<label for="who2_5">All of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_2" value="4" id="who2_4" required>
							<label for="who2_4">Most of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_2" value="3" id="who2_3" required>
							<label for="who2_3">More than half of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_2" value="2" id="who2_2" required>
							<label for="who2_2">Less than half of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_2" value="1" id="who2_1" required>
							<label for="who2_1">Some of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_2" value="0" id="who2_0" required>
							<label for="who2_0">At no time</label>
						</div>
					</div>
				</fieldset>
				<fieldset class="question-group">
					<legend class="question-label">
						I have felt active and vigorous <span class="required">*</span>
					</legend>
					<div class="radio-group">
						<div class="radio-option">
							<input type="radio" name="who5_3" value="5" id="who3_5" required>
							<label for="who3_5">All of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_3" value="4" id="who3_4" required>
							<label for="who3_4">Most of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_3" value="3" id="who3_3" required>
							<label for="who3_3">More than half of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_3" value="2" id="who3_2" required>
							<label for="who3_2">Less than half of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_3" value="1" id="who3_1" required>
							<label for="who3_1">Some of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_3" value="0" id="who3_0" required>
							<label for="who3_0">At no time</label>
						</div>
					</div>
				</fieldset>
				<fieldset class="question-group">
					<legend class="question-label">
						I woke up feeling fresh and rested<span class="required">*</span>
					</legend>
					<div class="radio-group">
						<div class="radio-option">
							<input type="radio" name="who5_4" value="5" id="who4_5" required>
							<label for="who4_5">All of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_4" value="4" id="who4_4" required>
							<label for="who4_4">Most of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_4" value="3" id="who4_3" required>
							<label for="who4_3">More than half of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_4" value="2" id="who4_2" required>
							<label for="who4_2">Less than half of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_4" value="1" id="who4_1" required>
							<label for="who4_1">Some of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_4" value="0" id="who4_0" required>
							<label for="who4_0">At no time</label>
						</div>
					</div>
				</fieldset>
				<fieldset class="question-group">
					<legend class="question-label">
						My daily life has been filled with things that interest me <span class="required">*</span>
					</legend>
					<div class="radio-group">
						<div class="radio-option">
							<input type="radio" name="who5_5" value="5" id="who5_5" required>
							<label for="who5_5">All of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_5" value="4" id="who5_4" required>
							<label for="who5_4">Most of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_5" value="3" id="who5_3" required>
							<label for="who5_3">More than half of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_5" value="2" id="who5_2" required>
							<label for="who5_2">Less than half of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_5" value="1" id="who5_1" required>
							<label for="who5_1">Some of the time</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="who5_5" value="0" id="who5_0" required>
							<label for="who5_0">At no time</label>
						</div>
					</div>
				</fieldset>
			</div>

            
            <!-- POEM Section -->
            <div class="section" id="poem">
                <h2 class="section-title">POEM (Patient Oriented Eczema Measure)</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">Please answer the following questions about your eczema over the past week.</p>
                
                <fieldset class="question-group">
                    <legend class="question-label">
                        How many days over the past week has your skin been itchy because of your eczema? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="0" id="poem1_0" required>
                            <label for="poem1_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="1" id="poem1_1" required>
                            <label for="poem1_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="2" id="poem1_2" required>
                            <label for="poem1_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="3" id="poem1_3" required>
                            <label for="poem1_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_1" value="4" id="poem1_4" required>
                            <label for="poem1_4">Every day</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How many nights over the past week has your sleep been disturbed because of your eczema? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="0" id="poem2_0" required>
                            <label for="poem2_0">No nights</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="1" id="poem2_1" required>
                            <label for="poem2_1">1-2 nights</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="2" id="poem2_2" required>
                            <label for="poem2_2">3-4 nights</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="3" id="poem2_3" required>
                            <label for="poem2_3">5-6 nights</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_2" value="4" id="poem2_4" required>
                            <label for="poem2_4">Every night</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How many days over the past week has your skin been bleeding because of your eczema? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="0" id="poem3_0" required>
                            <label for="poem3_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="1" id="poem3_1" required>
                            <label for="poem3_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="2" id="poem3_2" required>
                            <label for="poem3_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="3" id="poem3_3" required>
                            <label for="poem3_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_3" value="4" id="poem3_4" required>
                            <label for="poem3_4">Every day</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How many days over the past week has your skin been weeping (wet or leaking clear fluid) because of your eczema? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="0" id="poem4_0" required>
                            <label for="poem4_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="1" id="poem4_1" required>
                            <label for="poem4_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="2" id="poem4_2" required>
                            <label for="poem4_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="3" id="poem4_3" required>
                            <label for="poem4_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_4" value="4" id="poem4_4" required>
                            <label for="poem4_4">Every day</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How many days over the past week has your skin been cracked because of your eczema? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="0" id="poem5_0" required>
                            <label for="poem5_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="1" id="poem5_1" required>
                            <label for="poem5_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="2" id="poem5_2" required>
                            <label for="poem5_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="3" id="poem5_3" required>
                            <label for="poem5_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_5" value="4" id="poem5_4" required>
                            <label for="poem5_4">Every day</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How many days over the past week has your skin been flaking off because of your eczema? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="0" id="poem6_0" required>
                            <label for="poem6_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="1" id="poem6_1" required>
                            <label for="poem6_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="2" id="poem6_2" required>
                            <label for="poem6_2">3-4 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="3" id="poem6_3" required>
                            <label for="poem6_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_6" value="4" id="poem6_4" required>
                            <label for="poem6_4">Every day</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        How many days over the past week has your skin felt dry or rough because of your eczema? <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="poem_7" value="0" id="poem7_0" required>
                            <label for="poem7_0">No days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_7" value="1" id="poem7_1" required>
                            <label for="poem7_1">1-2 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_7" value="2" id="poem7_2" required>
                            <label for="poem7_2">3-4 days</label>
                        </div>
						<div class="radio-option">
                            <input type="radio" name="poem_7" value="3" id="poem7_3" required>
                            <label for="poem7_3">5-6 days</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="poem_7" value="4" id="poem7_4" required>
                            <label for="poem7_4">Every day</label>
                        </div>
                    </div>
                </fieldset>
            </div>
            
            <!-- MADRS Section -->
            <div class="section" id="madrs">
                <h2 class="section-title">MADRS (Montgomery-Åsberg Depression Rating Scale)</h2>
                <p style="margin-bottom: 30px; text-align: center; color: #666;">Please select the response that best describes how you have been feeling during the past week.</p>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Sadness <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_1" value="0" id="madrs1_0" required>
                            <label for="madrs1_0">0 - Occasional sadness in keeping with the circumstances</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_1" value="1" id="madrs1_1" required>
                            <label for="madrs1_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_1" value="2" id="madrs1_2" required>
                            <label for="madrs1_2">2 - Sad or low but brightens up without difficulty</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_1" value="3" id="madrs1_3" required>
                            <label for="madrs1_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_1" value="4" id="madrs1_4" required>
                            <label for="madrs1_4">4 - Pervasive feelings of sadness or gloominess</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_1" value="5" id="madrs1_5" required>
                            <label for="madrs1_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_1" value="6" id="madrs1_6" required>
                            <label for="madrs1_6">6 - Continuous or unvarying sadness, misery or despondency</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Inner Tension <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_2" value="0" id="madrs2_0" required>
                            <label for="madrs2_0">0 - Placid. Only fleeting inner tension</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_2" value="1" id="madrs2_1" required>
                            <label for="madrs2_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_2" value="2" id="madrs2_2" required>
                            <label for="madrs2_2">2 - Occasional feelings of edginess and ill-defined discomfort</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_2" value="3" id="madrs2_3" required>
                            <label for="madrs2_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_2" value="4" id="madrs2_4" required>
                            <label for="madrs2_4">4 - Continuous feelings of inner tension or panic</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_2" value="5" id="madrs2_5" required>
                            <label for="madrs2_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_2" value="6" id="madrs2_6" required>
                            <label for="madrs2_6">6 - Unrelenting dread or anguish. Overwhelming panic</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Reduced Sleep <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_3" value="0" id="madrs3_0" required>
                            <label for="madrs3_0">0 - Sleeps as usual</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_3" value="1" id="madrs3_1" required>
                            <label for="madrs3_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_3" value="2" id="madrs3_2" required>
                            <label for="madrs3_2">2 - Slight difficulty dropping off to sleep or slightly reduced, light or fitful sleep</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_3" value="3" id="madrs3_3" required>
                            <label for="madrs3_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_3" value="4" id="madrs3_4" required>
                            <label for="madrs3_4">4 - Sleep reduced or broken by at least two hours</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_3" value="5" id="madrs3_5" required>
                            <label for="madrs3_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_3" value="6" id="madrs3_6" required>
                            <label for="madrs3_6">6 - Less than two or three hours sleep</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Reduced Appetite <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_4" value="0" id="madrs4_0" required>
                            <label for="madrs4_0">0 - Normal or increased appetite</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_4" value="1" id="madrs4_1" required>
                            <label for="madrs4_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_4" value="2" id="madrs4_2" required>
                            <label for="madrs4_2">2 - Slightly reduced appetite</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_4" value="3" id="madrs4_3" required>
                            <label for="madrs4_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_4" value="4" id="madrs4_4" required>
                            <label for="madrs4_4">4 - No appetite. Food is tasteless</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_4" value="5" id="madrs4_5" required>
                            <label for="madrs4_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_4" value="6" id="madrs4_6" required>
                            <label for="madrs4_6">6 - Needs persuasion to eat at all</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Concentration Difficulties <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_5" value="0" id="madrs5_0" required>
                            <label for="madrs5_0">0 - No difficulties in concentrating</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_5" value="1" id="madrs5_1" required>
                            <label for="madrs5_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_5" value="2" id="madrs5_2" required>
                            <label for="madrs5_2">2 - Occasional difficulties in collecting one's thoughts</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_5" value="3" id="madrs5_3" required>
                            <label for="madrs5_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_5" value="4" id="madrs5_4" required>
                            <label for="madrs5_4">4 - Difficulties in concentrating and sustaining thought</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_5" value="5" id="madrs5_5" required>
                            <label for="madrs5_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_5" value="6" id="madrs5_6" required>
                            <label for="madrs5_6">6 - Unable to read or converse without great difficulty</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Lassitude (lack of energy) <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_6" value="0" id="madrs6_0" required>
                            <label for="madrs6_0">0 - Hardly any difficulty in getting started. No sluggishness</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_6" value="1" id="madrs6_1" required>
                            <label for="madrs6_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_6" value="2" id="madrs6_2" required>
                            <label for="madrs6_2">2 - Difficulties in starting activities</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_6" value="3" id="madrs6_3" required>
                            <label for="madrs6_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_6" value="4" id="madrs6_4" required>
                            <label for="madrs6_4">4 - Difficulties in starting simple routine activities</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_6" value="5" id="madrs6_5" required>
                            <label for="madrs6_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_6" value="6" id="madrs6_6" required>
                            <label for="madrs6_6">6 - Complete lassitude. Unable to do anything without help</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Inability to Feel (anhedonia) <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_7" value="0" id="madrs7_0" required>
                            <label for="madrs7_0">0 - Normal interest in the surroundings and in other people</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_7" value="1" id="madrs7_1" required>
                            <label for="madrs7_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_7" value="2" id="madrs7_2" required>
                            <label for="madrs7_2">2 - Reduced ability to enjoy usual interests</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_7" value="3" id="madrs7_3" required>
                            <label for="madrs7_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_7" value="4" id="madrs7_4" required>
                            <label for="madrs7_4">4 - Loss of interest in surroundings, friends and activities</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_7" value="5" id="madrs7_5" required>
                            <label for="madrs7_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_7" value="6" id="madrs7_6" required>
                            <label for="madrs7_6">6 - The experience of being emotionally paralyzed</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Pessimistic Thoughts <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_8" value="0" id="madrs8_0" required>
                            <label for="madrs8_0">0 - No pessimistic thoughts</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_8" value="1" id="madrs8_1" required>
                            <label for="madrs8_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_8" value="2" id="madrs8_2" required>
                            <label for="madrs8_2">2 - Fluctuating ideas of failure, self-reproach or self-depreciation</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_8" value="3" id="madrs8_3" required>
                            <label for="madrs8_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_8" value="4" id="madrs8_4" required>
                            <label for="madrs8_4">4 - Persistent self-accusations, or definite but still rational ideas of guilt or sin</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_8" value="5" id="madrs8_5" required>
                            <label for="madrs8_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_8" value="6" id="madrs8_6" required>
                            <label for="madrs8_6">6 - Delusions of ruin, remorse or unredeemable sin</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Suicidal Thoughts <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_9" value="0" id="madrs9_0" required>
                            <label for="madrs9_0">0 - Enjoys life or takes it as it comes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_9" value="1" id="madrs9_1" required>
                            <label for="madrs9_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_9" value="2" id="madrs9_2" required>
                            <label for="madrs9_2">2 - Weary of life. Only fleeting suicidal thoughts</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_9" value="3" id="madrs9_3" required>
                            <label for="madrs9_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_9" value="4" id="madrs9_4" required>
                            <label for="madrs9_4">4 - Probably better off dead. Suicidal thoughts are common</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_9" value="5" id="madrs9_5" required>
                            <label for="madrs9_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_9" value="6" id="madrs9_6" required>
                            <label for="madrs9_6">6 - Explicit plans for suicide when there is an opportunity. Active preparations for suicide</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="question-group">
                    <legend class="question-label">
                        Overall Well-Being <span class="required">*</span>
                    </legend>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="madrs_10" value="0" id="madrs10_0" required>
                            <label for="madrs10_0">0 - Feeling well and functioning normally</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_10" value="1" id="madrs10_1" required>
                            <label for="madrs10_1">1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_10" value="2" id="madrs10_2" required>
                            <label for="madrs10_2">2 - Feeling somewhat unwell but managing most activities</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_10" value="3" id="madrs10_3" required>
                            <label for="madrs10_3">3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_10" value="4" id="madrs10_4" required>
                            <label for="madrs10_4">4 - Feeling quite unwell with significant difficulty in activities</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_10" value="5" id="madrs10_5" required>
                            <label for="madrs10_5">5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="madrs_10" value="6" id="madrs10_6" required>
                            <label for="madrs10_6">6 - Feeling extremely unwell and unable to function</label>
                        </div>
                    </div>
                </fieldset>
            </div>
            
            <!-- WPAI Section -->
			<div class="section" id="wpai">
				<h2 class="section-title">WPAI (Work Productivity and Activity Impairment)</h2>
				<!-- Work status question -->
				<fieldset class="question-group">
					<legend class="question-label">
						Are you currently employed (working for pay)? <span class="required">*</span>
					</legend>
					<div class="radio-group" id="wpaiWorkingGroup">
						<div class="radio-option">
							<input type="radio" name="wpai_working" value="yes" id="wpai_working_yes" required>
							<label for="wpai_working_yes">Yes</label>
						</div>
						<div class="radio-option">
							<input type="radio" name="wpai_working" value="no" id="wpai_working_no" required>
							<label for="wpai_working_no">No</label>
						</div>
					</div>
				</fieldset>
				<!-- Info box -->
				<div id="wpaiInfoBox" style="margin: 24px 0; background: #f8f9fa; padding: 16px; border-radius: 8px; text-align: center; font-size: 1.1em;">
					The following questions refer to the <b>past seven days.</b> Today should not be included.
				</div>
				<!-- Employed questions (shown only if 'Yes' is selected) -->
				<div id="wpaiEmployedQuestions">
					<!-- SLIDER 1 -->
					<fieldset class="question-group" id="wpaiHoursQ1">
						<legend class="question-label">
							2) How many hours of work did you miss due to <u>your atopic dermatitis</u> during the past seven days? <span class="required">*</span> <div style="margin-top: 8px; color: #888; font-size:0.95em"><i>Add up the total number of hours you were absent in connection with sick days, times you came in late, left early, etc. due to your atopic dermatitis. Do not include time you were absent to participate in this survey.</i></div>
						</legend>
						<div class="slider-input-group">
							<input type="range" name="wpai_hours_should_work_slider" class="slider-input" min="0" max="168" value="0" id="wpaiHoursShouldWorkSlider" required>
							<input type="number" name="wpai_hours_should_work" class="form-input slider-number" min="0" max="168" value="0" id="wpaiHoursShouldWorkNumber" required>
						</div>
						<div style="margin-top: 8px; color: #888; font-size:0.95em; text-align:center;">
							0–168 hours (max 24 hours x 7 days)
						</div>
					</fieldset>
					<!-- SLIDER 2 -->
					<fieldset class="question-group" id="wpaiHoursQ2">
						<legend class="question-label">
							3) How many hours of work did you miss for other reasons during the past seven days, such as vacation, holidays, time off to participate in this survey? <span class="required">*</span>
						</legend>
						<div class="slider-input-group">
							<input type="range" name="wpai_hours_missed_health_slider" class="slider-input" min="0" max="168" value="0" id="wpaiHoursMissedHealthSlider" required>
							<input type="number" name="wpai_hours_missed_health" class="form-input slider-number" min="0" max="168" value="0" id="wpaiHoursMissedHealthNumber" required>
						</div>
						<div style="margin-top: 8px; color: #888; font-size:0.95em; text-align:center;">
							0–168 hours (max 24 hours x 7 days)
						</div>
					</fieldset>
					<!-- SLIDER 3 -->
					<fieldset class="question-group" id="wpaiHoursQ3">
						<legend class="question-label">
							4) How many hours did you actually work during the past seven days? <span class="required">*</span>
						</legend>
						<div class="slider-input-group">
							<input type="range" name="wpai_hours_missed_other_slider" class="slider-input" min="0" max="168" value="0" id="wpaiHoursMissedOtherSlider" required>
							<input type="number" name="wpai_hours_missed_other" class="form-input slider-number" min="0" max="168" value="0" id="wpaiHoursMissedOtherNumber" required>
						</div>
						<div style="margin-top: 8px; color: #888; font-size:0.95em; text-align:center;">
							0–168 hours (max 24 hours x 7 days)
						</div>
					</fieldset>
					<!-- Presenteeism slider -->
					<fieldset class="question-group" id="wpaiPresenteeismGroup">
						<legend class="question-label">
							How much did your atopic dermatitis affect your productivity <u>while you were working</u> during the past seven days? (0–10) <span class="required">*</span> <div style="margin-top: 8px; color: #888; font-size:0.95em"><i>Think about days when you were limited in the amount or kind of work you could do, days you accomplished less than you would like, or days you could not do your work as carefully as usual. If your atopic dermatitis affected your work only a little, choose a low number. Choose a higher number if your atopic dermatitis affected your work a great deal.</i></div>
						</legend>
						<div class="slider-input-group">
							<input type="range" name="wpai_presenteeism_slider" class="slider-input" min="0" max="10" value="0" id="wpaiPresenteeismSlider" required>
							<input type="number" name="wpai_presenteeism" class="form-input slider-number" min="0" max="10" value="0" id="wpaiPresenteeismNumber" required>
						</div>
						<div style="margin-top: 8px; color: #888; font-size:0.95em; text-align:center;">
							0: Atopic dermatitis had no effect on my work<br>
							10: Atopic dermatitis completely prevented me from working
						</div>
					</fieldset>
				</div>
				<!-- Activity impairment slider (always shown) -->
				<fieldset class="question-group" id="wpaiDailyActivityGroup">
					<legend class="question-label">
						How much did your atopic dermatitis affect your ability to do your regular daily activities, other than work during the past seven days? <span class="required">*</span> <div style="margin-top: 8px; color: #888; font-size:0.95em"><i>By regular activities, we mean the usual activities you do, such as work around the house, shopping, childcare, exercising, studying, etc. Think about times you were limited in the amount or kind of activities you could do and times you accomplished less than you would like. If your atopic dermatitis affected your activities only a little, choose a low number. Choose a higher number if your atopic dermatitis affected your activities a great deal.</i></div>
					</legend>
					<div class="slider-input-group">
						<input type="range" name="wpai_activity_slider" class="slider-input" min="0" max="10" value="0" id="wpaiActivitySlider" required>
						<input type="number" name="wpai_activity" class="form-input slider-number" min="0" max="10" value="0" id="wpaiActivityNumber" required>
					</div>
					<div style="margin-top: 8px; color: #888; font-size:0.95em; text-align:center;">
						0: Atopic dermatitis had no effect on my daily activities<br>
						10: Atopic dermatitis completely prevented me from doing my daily activities
					</div>
				</fieldset>
			</div>

            
            <div class="nav-buttons">
                <button type="button" class="nav-btn prev-btn" id="prevBtn" style="display: none;">Previous</button>
                <button type="button" class="nav-btn next-btn" id="nextBtn">Next Section</button>
                <button type="submit" class="nav-btn submit-btn" id="submitBtn" style="display: none;">Complete Survey</button>
            </div>
        </form>
    </div>

    <!-- Timer Result Modal -->
    <div id="timerModal" class="modal">
        <div class="modal-content">
            <h2>Survey Completed!</h2>
            <p>Thank you for your participation.</p>
            <p>Time to complete:</p>
            <div class="time-display" id="completionTime">00:00</div>
            <button class="modal-btn" onclick="closeModal()">Close</button>
        </div>
    </div>
    
    <script>
        // NOTE: I am keeping the original JS logic but modifying alert messages to Norwegian.
        // The core functionality remains unchanged.
        let timerStart = null;
        let timerStarted = false;
        let currentSection = 0;
        let surveyStopped = false;
        
        const sections = ['background', 'employment', 'treatment', 'comorbidities', 'disease-severity', 'dlqi', 'who5', 'poem', 'madrs', 'wpai'];
        
        function startTimer() {
            if (!timerStarted && !surveyStopped) {
                timerStart = new Date();
                timerStarted = true;
                console.log('Timer started');
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            setupSliders();
            setupNavigation();
            setupConditionalLogic();
            setupFormInteractions();
            setupCheckboxGroupValidation();
        });
        
        function setupCheckboxGroupValidation() {
            const bodyPartsCheckboxes = document.querySelectorAll('input[name="affected_body_parts"]');
            const validationInput = document.getElementById('affected_body_parts_validation');

            bodyPartsCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const isAnyChecked = Array.from(bodyPartsCheckboxes).some(cb => cb.checked);
                    validationInput.value = isAnyChecked ? 'valid' : '';
                });
            });
            const isAnyCheckedInitially = Array.from(bodyPartsCheckboxes).some(cb => cb.checked);
            validationInput.value = isAnyCheckedInitially ? 'valid' : '';
        }


        function setupSliders() {
            const ageSlider = document.getElementById('ageSlider');
            const ageNumber = document.getElementById('ageNumber');
            const ageError = document.getElementById('ageError');
            
            function syncAgeInputs(value) {
                const isInvalid = value < 18 || value > 119;
                ageSlider.value = value;
                ageNumber.value = value;
                ageError.classList.toggle('hidden', !isInvalid);
                ageNumber.setAttribute('aria-invalid', isInvalid);
            }
            if (ageSlider) ageSlider.addEventListener('input', function() { syncAgeInputs(this.value); startTimer(); });
            if (ageNumber) ageNumber.addEventListener('input', function() { syncAgeInputs(this.value); startTimer(); });
            
            function setupGenericSlider(sliderId, numberId) {
                const slider = document.getElementById(sliderId);
                const number = document.getElementById(numberId);
                if (slider && number) {
                    function syncInputs(value) { slider.value = value; number.value = value; }
                    slider.addEventListener('input', function() { syncInputs(this.value); startTimer(); });
                    number.addEventListener('input', function() { syncInputs(this.value); startTimer(); });
                }
            }
            setupGenericSlider('weightSlider', 'weightNumber');
            setupGenericSlider('heightSlider', 'heightNumber');
            setupGenericSlider('partTimeSlider', 'partTimeNumber');
            setupGenericSlider('wpai1Slider', 'wpai1Number');
            setupGenericSlider('wpai2Slider', 'wpai2Number');
            setupGenericSlider('wpai3Slider', 'wpai3Number');
        }
        
        function setupNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const form = document.getElementById('surveyForm');
            
            nextBtn.addEventListener('click', function() {
                if (surveyStopped) return;

                // Clear previous invalid states
                form.querySelectorAll('[aria-invalid="true"]').forEach(el => el.setAttribute('aria-invalid', 'false'));

                const currentSectionElement = document.getElementById(sections[currentSection]);
                let firstInvalidField = null;

                const fieldsToCheck = currentSectionElement.querySelectorAll('input[required], select[required], textarea[required]');
                
                for (const field of fieldsToCheck) {
                    let isFieldEffectivelyVisible = true;
                    let currentElement = field;
                    while (currentElement && currentElement !== document.body) {
                        const styles = window.getComputedStyle(currentElement);
                        if (styles.display === 'none' || styles.visibility === 'hidden') {
                            if (field.id === 'affected_body_parts_validation' && currentElement.id === 'affected_body_parts_validation') {
                                const bodyPartsGroup = document.getElementById('affectedBodyPartsGroup');
                                if (bodyPartsGroup && window.getComputedStyle(bodyPartsGroup).display === 'none') {
                                     isFieldEffectivelyVisible = false;
                                }
                            } else {
                                isFieldEffectivelyVisible = false;
                            }
                            break;
                        }
                        if (currentElement.classList.contains('hidden')) {
                             isFieldEffectivelyVisible = false;
                             break;
                        }
                        currentElement = currentElement.parentElement;
                    }

                    if (isFieldEffectivelyVisible) {
                        if (!field.checkValidity()) {
                            firstInvalidField = field;
                            break; 
                        }
                    }
                }

                if (firstInvalidField) {
                    firstInvalidField.setAttribute('aria-invalid', 'true');
                    if (typeof firstInvalidField.reportValidity === 'function') {
                        firstInvalidField.reportValidity(); 
                    } else {
                        firstInvalidField.focus(); 
                    }
                    if (firstInvalidField.id === 'affected_body_parts_validation') {
                         alert('Please select at least one affected body part.');
                    } else {
                         alert('Please complete all required fields in this section before proceeding.');
                    }
                } else {
                    if (currentSection < sections.length - 1) {
                        currentSection++;
                        showSection(currentSection);
                    }
                }
            });
            
            prevBtn.addEventListener('click', function() {
                if (currentSection > 0 && !surveyStopped) {
                    currentSection--;
                    showSection(currentSection);
                }
            });
            
            document.querySelectorAll('.section-tab').forEach((tab, index) => {
                tab.addEventListener('click', function() {
                    if (!surveyStopped) {
                        currentSection = index;
                        showSection(currentSection);
                    }
                });
            });
        }
        
        function showSection(index) {
            document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
            document.getElementById(sections[index]).classList.add('active');
            document.querySelector('.survey-form').scrollTop = 0;

            document.querySelectorAll('.section-tab').forEach((tab, i) => {
                tab.classList.toggle('active', i === index);
            });
            
            document.getElementById('prevBtn').style.display = index === 0 ? 'none' : 'block';
            document.getElementById('nextBtn').style.display = index === sections.length - 1 ? 'none' : 'block';
            document.getElementById('submitBtn').style.display = index === sections.length - 1 ? 'block' : 'none';
        }
        
        function setRequired(elements, required) {
            elements.forEach(el => {
                if (el) {
                    el.required = required;
                    if (!required && el.type === 'radio' && el.checked) {
                        el.checked = false;
                        (el.closest('.radio-option') || el.closest('.scale-option'))?.classList.remove('selected');
                    }
                     if (!required && el.type === 'checkbox' && el.checked) {
                        el.checked = false;
                         el.closest('.checkbox-option')?.classList.remove('selected');
                    }
                     if (!required && el.tagName === 'SELECT') {
                        el.value = '';
                    }
                }
            });
        }

        function updateNoTreatmentQuestionVisibility() {
            const treatmentDiv = document.getElementById('treatmentQuestions');
            if (!treatmentDiv || treatmentDiv.classList.contains('hidden')) {
                return;
            }

            const noTreatmentGroup = document.getElementById('currentNoTreatmentAnyQuestionGroup');
            const noTreatmentRadios = document.querySelectorAll('input[name="current_no_treatment_any"]');

            const isOralYes = document.querySelector('input[name="current_oral"][value="yes"]:checked');
            const isInjectableYes = document.querySelector('input[name="current_injectable"][value="yes"]:checked');
            const isTopicalYes = document.querySelector('input[name="current_topical"][value="yes"]:checked');
            const isPhototherapyYes = document.querySelector('input[name="current_phototherapy"][value="yes"]:checked');
            const isAlternativeYes = document.querySelector('input[name="current_alternative"][value="yes"]:checked');

            const anyOtherTreatmentSelected = isOralYes || isInjectableYes || isTopicalYes || isPhototherapyYes || isAlternativeYes;

            if (anyOtherTreatmentSelected) {
                noTreatmentGroup.classList.add('hidden');
                setRequired(noTreatmentRadios, false); 
            } else {
                noTreatmentGroup.classList.remove('hidden');
                setRequired(noTreatmentRadios, true); 
            }
        }

        function setupConditionalLogic() {
            document.querySelectorAll('input[name="gender"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const pregQ = document.getElementById('pregnancyQuestion');
                    const pregRadios = document.querySelectorAll('input[name="pregnant_lactating"]');
                    const isFemale = this.value === 'female';
                    pregQ.classList.toggle('hidden', !isFemale);
                    setRequired(pregRadios, isFemale);
                    if (!isFemale) {
                        document.getElementById('pregnancyStop').classList.add('hidden');
                        surveyStopped = false;
                    }
                });
            });
            
            document.querySelectorAll('input[name="pregnant_lactating"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const isPregnantOrLactating = this.value === 'yes';
                    document.getElementById('pregnancyStop').classList.toggle('hidden', !isPregnantOrLactating);
                    surveyStopped = isPregnantOrLactating;
                });
            });
            
            document.querySelectorAll('input[name="work_situation"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const conditions = {
                        part_time: { question: 'partTimeQuestion', input: 'partTimeNumber', type: 'number' },
                        partial_disability: { question: 'disabilityPercentageQuestion', input: 'disability_percentage', type: 'select', also: { question: 'disabilityReasonQuestion', radios: 'disability_reason'} },
                        full_disability: { question: 'disabilityReasonQuestion', radios: 'disability_reason'},
                        not_working: { question: 'notWorkingReasonQuestion', radios: 'not_working_reason'}
                    };
                    // Hide all and remove required from their specific inputs/radios
                    Object.values(conditions).forEach(cond => {
                        if(document.getElementById(cond.question)) document.getElementById(cond.question).classList.add('hidden');
                        if(cond.input && document.getElementById(cond.input)) setRequired([document.getElementById(cond.input)], false);
                        if(cond.radios) setRequired(document.querySelectorAll(`input[name="${cond.radios}"]`), false);
                        if(cond.also && document.getElementById(cond.also.question)) {
                             document.getElementById(cond.also.question).classList.add('hidden');
                             setRequired(document.querySelectorAll(`input[name="${cond.also.radios}"]`), false);
                        }
                    });

                    const selectedCondition = conditions[this.value];
                    if (selectedCondition) {
                        if(document.getElementById(selectedCondition.question)) document.getElementById(selectedCondition.question).classList.remove('hidden');
                        if(selectedCondition.input && document.getElementById(selectedCondition.input)) setRequired([document.getElementById(selectedCondition.input)], true);
                        if(selectedCondition.radios) setRequired(document.querySelectorAll(`input[name="${selectedCondition.radios}"]`), true);
                         if(selectedCondition.also && document.getElementById(selectedCondition.also.question)) {
                             document.getElementById(selectedCondition.also.question).classList.remove('hidden');
                             setRequired(document.querySelectorAll(`input[name="${selectedCondition.also.radios}"]`), true);
                        }
                    }
                });
            });
            
            document.querySelectorAll('input[name="ever_treated"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const treatmentDiv = document.getElementById('treatmentQuestions');
                    const isYes = this.value === 'yes';
                    treatmentDiv.classList.toggle('hidden', !isYes);

                    setRequired([document.querySelector('select[name="first_treatment"]')], isYes);
                    ['current_oral', 'current_injectable', 'current_topical', 'current_phototherapy', 'current_alternative', 'treatment_satisfaction'].forEach(name => {
                        setRequired(document.querySelectorAll(`input[name="${name}"]`), isYes);
                    });
                    
                    const noTreatmentRadios = document.querySelectorAll('input[name="current_no_treatment_any"]');
                    if (isYes) {
                        updateNoTreatmentQuestionVisibility(); 
                    } else {
                        document.getElementById('currentNoTreatmentAnyQuestionGroup').classList.add('hidden');
                        setRequired(noTreatmentRadios, false);
                    }

                    if (!isYes) { 
                        ['currentOralMedsQuestion', 'currentInjectableMedsQuestion', 'currentTopicalMedsQuestion'].forEach(id => {
                            const el = document.getElementById(id);
                            if (el) {
                                el.classList.add('hidden');
                                el.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                                    cb.checked = false; cb.closest('.checkbox-option')?.classList.remove('selected');
                                });
                            }
                        });
                        ['current_oral', 'current_injectable', 'current_topical', 'current_phototherapy', 'current_alternative', 'current_no_treatment_any', 'treatment_satisfaction'].forEach(name => {
                            document.querySelectorAll(`input[name="${name}"]`).forEach(rb => {
                                rb.checked = false;
                                (rb.closest('.radio-option') || rb.closest('.scale-option'))?.classList.remove('selected');
                            });
                        });
                    }
                });
            });
            
            ['current_oral', 'current_injectable', 'current_topical', 'current_phototherapy', 'current_alternative'].forEach(name => {
                document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                    radio.addEventListener('change', updateNoTreatmentQuestionVisibility);
                });
            });

            function setupConditionalCheckbox(radioName, questionId, checkboxGroupName) {
                document.querySelectorAll(`input[name="${radioName}"]`).forEach(radio => {
                    radio.addEventListener('change', function() {
                        const questionDiv = document.getElementById(questionId);
                        if (questionDiv) {
                            const isYes = this.value === 'yes';
                            questionDiv.classList.toggle('hidden', !isYes);
                            if (!isYes) {
                                document.querySelectorAll(`input[name="${checkboxGroupName}"]`).forEach(cb => {
                                    cb.checked = false; cb.closest('.checkbox-option')?.classList.remove('selected');
                                });
                            }
                        }
                        if (['current_oral', 'current_injectable', 'current_topical'].includes(radioName)) {
                            updateNoTreatmentQuestionVisibility();
                        }
                    });
                });
            }
            setupConditionalCheckbox('current_oral', 'currentOralMedsQuestion', 'current_oral_meds');
            setupConditionalCheckbox('current_injectable', 'currentInjectableMedsQuestion', 'current_injectable_meds');
            setupConditionalCheckbox('current_topical', 'currentTopicalMedsQuestion', 'current_topical_meds');
        }
        
        function setupFormInteractions() {
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.addEventListener('focus', startTimer);
                input.addEventListener('input', startTimer);
                input.addEventListener('change', startTimer);
            });
            
            document.querySelectorAll('.radio-option').forEach(option => {
                option.addEventListener('click', function() {
                    const radio = this.querySelector('input[type="radio"]');
                    if (radio && !surveyStopped) {
                        radio.checked = true;
                        document.querySelectorAll(`input[name="${radio.name}"]`).forEach(r => {
                            r.closest('.radio-option')?.classList.remove('selected');
                        });
                        this.classList.add('selected');
                        radio.dispatchEvent(new Event('change'));
                    }
                });
            });
            
            document.querySelectorAll('.checkbox-option').forEach(option => {
                option.addEventListener('click', function() {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    if (checkbox && !surveyStopped) {
                        checkbox.checked = !checkbox.checked;
                        this.classList.toggle('selected', checkbox.checked); 
                        checkbox.dispatchEvent(new Event('change'));
                        startTimer();
                    }
                });
            });
            
            document.querySelectorAll('.scale-option').forEach(option => {
                option.addEventListener('click', function() {
                    const radio = this.querySelector('input[type="radio"]');
                    if (radio && !surveyStopped) {
                        radio.checked = true;
                        document.querySelectorAll(`input[name="${radio.name}"]`).forEach(r => {
                           r.closest('.scale-option')?.classList.remove('selected');
                        });
                        this.classList.add('selected');
                        radio.dispatchEvent(new Event('change'));
                        startTimer();
                    }
                });
            });
        }
        
        document.getElementById('surveyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (surveyStopped) return;

            // Clear previous invalid states
            this.querySelectorAll('[aria-invalid="true"]').forEach(el => el.setAttribute('aria-invalid', 'false'));

            let firstInvalidFieldOverall = null;
            for (const sectionId of sections) { 
                const sectionElement = document.getElementById(sectionId);
                const fieldsToCheck = sectionElement.querySelectorAll('input[required], select[required], textarea[required]');
                for (const field of fieldsToCheck) {
                    let isFieldEffectivelyVisible = true;
                    let currentElement = field;
                     while (currentElement && currentElement !== document.body) {
                        const styles = window.getComputedStyle(currentElement);
                         if (styles.display === 'none' || styles.visibility === 'hidden' || currentElement.classList.contains('hidden')) {
                            if (field.id === 'affected_body_parts_validation' && currentElement.id === 'affected_body_parts_validation') {
                               const bodyPartsGroup = document.getElementById('affectedBodyPartsGroup');
                                if (bodyPartsGroup && window.getComputedStyle(bodyPartsGroup).display === 'none') isFieldEffectivelyVisible = false;
                            } else {
                                isFieldEffectivelyVisible = false;
                            }
                            break;
                        }
                        currentElement = currentElement.parentElement;
                    }

                    if (isFieldEffectivelyVisible && !field.checkValidity()) {
                        firstInvalidFieldOverall = field;
                        break;
                    }
                }
                if (firstInvalidFieldOverall) break;
            }
            
            if (firstInvalidFieldOverall) {
                const invalidSectionIndex = sections.indexOf(firstInvalidFieldOverall.closest('.section').id);
                if (invalidSectionIndex !== currentSection) {
                    showSection(invalidSectionIndex); 
                }
                setTimeout(() => { 
                    firstInvalidFieldOverall.setAttribute('aria-invalid', 'true');
                    if (typeof firstInvalidFieldOverall.reportValidity === 'function') {
                        firstInvalidFieldOverall.reportValidity();
                    } else {
                        firstInvalidFieldOverall.focus();
                    }
                     if (firstInvalidFieldOverall.id === 'affected_body_parts_validation') {
                         alert('Please select at least one affected body part.');
                    } else {
                        alert('Please complete all required fields.');
                    }
                }, 100); 
                return;
            }
            
            if (!timerStarted) {
                 alert("It appears the survey was not actively filled out. Please go through the questions.");
                 return;
            }

            const endTime = new Date();
            const totalTime = Math.floor((endTime - timerStart) / 1000);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            document.getElementById('completionTime').textContent = timeString;
            document.getElementById('timerModal').style.display = 'block';

            console.log('Survey completed in:', timeString);
        });
        
        function closeModal() {
            document.getElementById('timerModal').style.display = 'none';
        }
        
        window.addEventListener('click', function(event) {
            if (event.target === document.getElementById('timerModal')) {
                closeModal();
            }
        });
    </script>
	
	<script>
	document.getElementById('postalCodeInput').addEventListener('input', function() {
		const errorDiv = document.getElementById('postalCodeError');
		const postalCodePattern = /^\d{4}$/;
		// Only validate if the input is not empty
		const isInvalid = this.value !== "" && !postalCodePattern.test(this.value);

		errorDiv.classList.toggle('hidden', !isInvalid);
		this.setAttribute('aria-invalid', isInvalid);

		if (isInvalid) {
			this.setCustomValidity("Postal code must consist of 4 digits.");
		} else {
			this.setCustomValidity("");
		}
	});
	</script>

	<script>
		// Disability percentage slider sync + validation
		const disSlider = document.getElementById('disabilityPercentageSlider');
		const disNumber = document.getElementById('disabilityPercentageNumber');
		const disError = document.getElementById('disabilityPercentageError');

		function updateDisabilityInputs(e) {
			let val = parseInt(e.target.value, 10);
			if (e.target === disSlider) {
				disNumber.value = val;
			} else {
				disSlider.value = val;
			}
			const isInvalid = isNaN(val) || val < 50 || val > 99;
			disError.classList.toggle('hidden', !isInvalid);
			disNumber.setAttribute('aria-invalid', isInvalid);

			if (isInvalid) {
				disNumber.setCustomValidity("Disability percentage must be between 50 and 99.");
			} else {
				disNumber.setCustomValidity("");
			}
		}
		if (disSlider && disNumber && disError) {
			disSlider.addEventListener('input', updateDisabilityInputs);
			disNumber.addEventListener('input', updateDisabilityInputs);
		}
	</script>

	<script>
	function syncSliderAndNumber(sliderId, numberId, min, max) {
		const slider = document.getElementById(sliderId);
		const number = document.getElementById(numberId);
		if (slider && number) {
			slider.addEventListener('input', () => {
				number.value = slider.value;
			});
			number.addEventListener('input', () => {
				let val = parseInt(number.value, 10);
				if (isNaN(val) || val < min) val = min;
				if (val > max) val = max;
				slider.value = val;
				number.value = val;
			});
		}
	}

	// Symptoms days (0-7)
	syncSliderAndNumber('symptomsDaysSlider', 'symptomsDaysNumber', 0, 7);
	// Itch scale (0-10)
	syncSliderAndNumber('itchScaleSlider', 'itchScaleNumber', 0, 10);
	// Sleep interference (0-4)
	syncSliderAndNumber('sleepInterferenceSlider', 'sleepInterferenceNumber', 0, 4);
	</script>

	<script>
	function syncSliderAndNumberWPAI(sliderId, numberId, min, max, callback) {
		const slider = document.getElementById(sliderId);
		const number = document.getElementById(numberId);
		if (slider && number) {
			slider.addEventListener('input', () => {
				number.value = slider.value;
				if (callback) callback(slider.value);
			});
			number.addEventListener('input', () => {
				let val = parseInt(number.value, 10);
				if (isNaN(val) || val < min) val = min;
				if (val > max) val = max;
				slider.value = val;
				number.value = val;
				if (callback) callback(val);
			});
		}
	}

	// Existing slider/number syncs:
	syncSliderAndNumberWPAI('wpaiHoursShouldWorkSlider', 'wpaiHoursShouldWorkNumber', 0, 168);
	syncSliderAndNumberWPAI('wpaiHoursMissedHealthSlider', 'wpaiHoursMissedHealthNumber', 0, 168);
	// for "faktisk arbeidet", include callback to show/hide presenteeism
	syncSliderAndNumberWPAI('wpaiHoursMissedOtherSlider', 'wpaiHoursMissedOtherNumber', 0, 168, function(val) {
		const presenteeismGroup = document.getElementById('wpaiPresenteeismGroup');
		const isZero = parseInt(val, 10) === 0;
		presenteeismGroup.classList.toggle('hidden', isZero);
		
		// Set required attribute based on visibility
		const presenteeismInputs = presenteeismGroup.querySelectorAll('input');
		presenteeismInputs.forEach(input => input.required = !isZero);
	});
	syncSliderAndNumberWPAI('wpaiPresenteeismSlider', 'wpaiPresenteeismNumber', 0, 10);
	syncSliderAndNumberWPAI('wpaiActivitySlider', 'wpaiActivityNumber', 0, 10);

	// WPAI employed questions show/hide logic
	const wpaiWorkingRadios = document.querySelectorAll('input[name="wpai_working"]');
	const wpaiEmployedQuestions = document.getElementById('wpaiEmployedQuestions');
	const employedInputs = wpaiEmployedQuestions.querySelectorAll('input');

	function toggleWpaiEmployedQuestions(show) {
		wpaiEmployedQuestions.classList.toggle('hidden', !show);
		employedInputs.forEach(input => input.required = show);

        // Special handling for the presenteeism question which is conditionally required
        if (show) {
            const actualHoursWorked = document.getElementById('wpaiHoursMissedOtherNumber').value;
            const presenteeismIsRequired = parseInt(actualHoursWorked, 10) > 0;
            const presenteeismGroup = document.getElementById('wpaiPresenteeismGroup');
            presenteeismGroup.classList.toggle('hidden', !presenteeismIsRequired);
            presenteeismGroup.querySelectorAll('input').forEach(input => input.required = presenteeismIsRequired);
        }
	}

	wpaiWorkingRadios.forEach(radio => {
		radio.addEventListener('change', function() {
			toggleWpaiEmployedQuestions(this.value === "yes");
		});
	});
	// Initial state on page load
	window.addEventListener('DOMContentLoaded', function() {
		const checked = document.querySelector('input[name="wpai_working"]:checked');
		toggleWpaiEmployedQuestions(checked && checked.value === "yes");
	});
	</script>

	<script>
	function syncSliderAndNumber(sliderId, numberId, min, max) {
		const slider = document.getElementById(sliderId);
		const number = document.getElementById(numberId);
		if (slider && number) {
			slider.addEventListener('input', () => {
				number.value = slider.value;
			});
			number.addEventListener('input', () => {
				let val = parseInt(number.value, 10);
				if (isNaN(val) || val < min) val = min;
				if (val > max) val = max;
				slider.value = val;
				number.value = val;
			});
		}
	}
	syncSliderAndNumber('satisfactionSlider', 'satisfactionNumber', 0, 10);
	</script>

</body>
</html>
